    <!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Censo - Departamento El Progreso</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="Estilos.css">
    </head>
    <body>
        <div class="container mt-5">
            <div class="row">
                <h1> Censo poblacional</h1>
                <h1> 1890-19-2528 Bryan yeremy arrazola Cisneros</h1>

            </div>
            <div class="row">
                <!-- Tarjeta con la información -->
                <div class="col-md-6">
                    <div class="card text-white bg-primary mb-3">
                        <div class="card-header text-center">Municipios</div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label for="municipios" class="form-label">Departamento de El Progreso</label>
                                <select class="form-select" id="municipios">
                                    <option value="999" selected>Departamento de El Progreso</option>
                                    <option value="201">Guastatoya</option>
                                    <option value="202">Sanarate</option>
                                    <option value="203">Sansare</option>
                                    <option value="204">Morazán</option>
                                </select>
                            </div>

                            <p class="card-text">
                                <strong>Nombre:</strong> <span id="nombre">El Progreso</span><br>
                                <strong>Total municipios:</strong> <span id="totalMunicipios">8</span><br>
                                <strong>Cabecera:</strong> <span id="cabecera">Guastatoya</span><br>
                                <hr>
                                <strong>Población:</strong> <span id="poblacion">176,632</span> hab
                            </p>

                            <div class="section mb-3">
                                <h5 class="card-title text-center bg-info p-2">Personas</h5>
                                <p class="card-text">
                                    <strong>Índice de Masculinidad:</strong> <span id="masculinidad">97.44</span><br>
                                    <strong>Edad promedio:</strong> <span id="edadPromedio">28.38</span><br>
                                    <strong>Índice de Dependencia:</strong> <span id="dependencia">59.99</span><br>
                                    <strong>Años promedio de estudio:</strong> <span id="estudio">6.62</span><br>
                                    <strong>Alfabetismo:</strong> <span id="alfabetismo">86.56%</span>
                                </p>
                            </div>

                            <div class="section mb-3">
                                <h5 class="card-title text-center bg-info p-2">Viviendas y hogares</h5>
                                <p class="card-text">
                                    <strong>Viviendas particulares:</strong> <span id="viviendas">54,109</span><br>
                                    <strong>Total de hogares:</strong> <span id="hogares">44,213</span><br>
                                    <strong>Promedio personas por hogar:</strong> <span id="promedioHogar">4.00</span><br>
                                    <strong>Porcentaje de jefas de hogar:</strong> <span id="jefasHogar">25.26%</span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gráficas -->
                <div class="col-md-6">
                    <div class="card mb-3">
                        <div class="card-header text-center">Gráfica de Población por Edad</div>
                        <div class="card-body">
                            <canvas id="chartPoblacionEdad"></canvas>
                        </div>
                    </div>
                    <div class="card mb-3">
                        <div class="card-header text-center">Gráfica de Viviendas y Hogares</div>
                        <div class="card-body">
                            <canvas id="chartViviendasHogares"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nueva sección para Población por Sexo, Área y Pueblos -->
            <div class="row mt-5">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header text-center">Población por Sexo</div>
                                <div class="card-body">
                                    <p class="card-text"><strong>Hombres:</strong> <span id="hombres">87,172</span> (<span id="porcHombres">49.35</span>%)</p>
                                    <p class="card-text"><strong>Mujeres:</strong> <span id="mujeres">89,460</span> (<span id="porcMujeres">50.65</span>%)</p>
                                </div>
                            </div>

                            <div class="card mb-3">
                                <div class="card-header text-center">Población por Grandes Grupos de Edad</div>
                                <div class="card-body">
                                    <p class="card-text"><strong>0-14 años:</strong> <span id="edad0_14">53,929</span></p>
                                    <p class="card-text"><strong>15-64 años:</strong> <span id="edad15_64">110,404</span></p>
                                    <p class="card-text"><strong>65+ años:</strong> <span id="edad65">12,299</span></p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header text-center">Población por Área</div>
                                <div class="card-body">
                                    <p class="card-text"><strong>Urbana:</strong> <span id="urbana">91,416</span> (<span id="porcUrbana">51.76</span>%)</p>
                                    <p class="card-text"><strong>Rural:</strong> <span id="rural">85,216</span> (<span id="porcRural">48.24</span>%)</p>
                                </div>
                            </div>

                            <div class="card mb-3">
                                <div class="card-header text-center">Población por Pueblos</div>
                                <div class="card-body">
                                    <p class="card-text"><strong>Maya:</strong> <span id="maya">2,627</span></p>
                                    <p class="card-text"><strong>Garífuna:</strong> <span id="garifuna">184</span></p>
                                    <p class="card-text"><strong>Xinka:</strong> <span id="xinka">46</span></p>
                                    <p class="card-text"><strong>Afrodescendiente/Creole/Afromestizo:</strong> <span id="afrodescendiente">86</span></p>
                                    <p class="card-text"><strong>Ladino:</strong> <span id="ladino">173,441</span></p>
                                    <p class="card-text"><strong>Extranjero:</strong> <span id="extranjero">248</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cargar Bootstrap, Chart.js y jQuery -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <!-- Script para generar las gráficas y manejar la dinámica -->
        <script>
            var chartPoblacionEdad;
            var chartViviendasHogares;

            $(document).ready(function () {
                function loadData(departmentCode) {
                    $.ajax({
                        url: `https://censopoblacion.azurewebsites.net/API/indicadores/2/${departmentCode}`,
                        type: 'GET',
                        dataType: 'json',
                        success: function (response) {
                            // Parsear el JSON
                            var data = JSON.parse(response);
                            // Actualizar los datos en las tarjetas
                            $('#nombre').text(data.nombre);
                            $('#totalMunicipios').text(data.total_lugares);
                            $('#cabecera').text(data.capital);
                            $('#poblacion').text(data.pob_total);
                            $('#masculinidad').text(data.indice_masculinidad);
                            $('#edadPromedio').text(data.edad_promedio);
                            $('#dependencia').text(data.indice_dependencia);
                            $('#estudio').text(data.anios_prom_estudio);
                            $('#alfabetismo').text(data.alfabetismo);
                            $('#viviendas').text(data.viviendas_part);
                            $('#hogares').text(data.total_hogares);
                            $('#promedioHogar').text(data.prom_personas_hogar);
                            $('#jefasHogar').text(data.total_jefas_hogar);

                            // Actualizar datos de población por sexo
                            $('#hombres').text(data.total_sexo_hombre);
                            $('#porcHombres').text(data.porc_sexo_hombre);
                            $('#mujeres').text(data.total_sexo_mujeres);
                            $('#porcMujeres').text(data.porc_sexo_mujeres);

                            // Actualizar datos de población por área
                            $('#urbana').text(data.total_sector_urbano);
                            $('#porcUrbana').text(data.porc_sector_urbano);
                            $('#rural').text(data.total_sector_rural);
                            $('#porcRural').text(data.porc_sector_rural);

                            // Actualizar datos de población por grandes grupos de edad
                            $('#edad0_14').text(data.pob_edad_014);
                            $('#edad15_64').text(data.pob_edad_1564);
                            $('#edad65').text(data.pob_edad_65);

                            // Actualizar datos de población por pueblos
                            $('#maya').text(data.pob_pueblo_maya);
                            $('#garifuna').text(data.pob_pueblo_garifuna);
                            $('#xinka').text(data.pob_pueblo_xinca);
                            $('#afrodescendiente').text(data.pob_pueblo_afrodescendiente);
                            $('#ladino').text(data.pob_pueblo_ladino);
                            $('#extranjero').text(data.pob_pueblo_extranjero);

                            // Actualizar gráficos
                            updateCharts(data);
                        },
                        error: function (xhr, status, error) {
                            console.log('Error:', error);
                        }
                    });
                }

                // Cargar datos iniciales
                loadData($('#municipios').val());

                // Cambiar datos al seleccionar un nuevo municipio
                $('#municipios').on('change', function () {
                    loadData($(this).val());
                });

                function updateCharts(data) {
                    // Destruir gráficos previos si existen
                    if (chartPoblacionEdad) {
                        chartPoblacionEdad.destroy();
                    }
                    if (chartViviendasHogares) {
                        chartViviendasHogares.destroy();
                    }

                    // Gráfica de Población por Edad
                    var ctxEdad = document.getElementById('chartPoblacionEdad').getContext('2d');
                    chartPoblacionEdad = new Chart(ctxEdad, {
                        type: 'bar',
                        data: {
                            labels: ['0-14 años', '15-64 años', '65+ años'],
                            datasets: [{
                                label: 'Población por Edad',
                                data: [data.pob_edad_014, data.pob_edad_1564, data.pob_edad_65],
                                backgroundColor: ['rgba(75, 192, 192, 0.2)', 'rgba(153, 102, 255, 0.2)', 'rgba(255, 159, 64, 0.2)'],
                                borderColor: ['rgba(75, 192, 192, 1)', 'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)'],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }
                    });

                    // Gráfica de Viviendas y Hogares
                    var ctxViviendas = document.getElementById('chartViviendasHogares').getContext('2d');
                    chartViviendasHogares = new Chart(ctxViviendas, {
                        type: 'bar',
                        data: {
                            labels: ['Viviendas particulares', 'Total de hogares'],
                            datasets: [{
                                label: 'Viviendas y Hogares',
                                data: [data.viviendas_part, data.total_hogares],
                                backgroundColor: ['rgba(54, 162, 235, 0.2)', 'rgba(255, 206, 86, 0.2)'],
                                borderColor: ['rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)'],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }
                    });
                }
            });
        </script>
    </body>
    </html>
